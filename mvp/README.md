# Tsukiichi Kakeibo MVP

MoneyForwardの家計簿（明細）と資産推移をローカルで取り込み、ダッシュボード・月次集計・明細一覧・将来シミュレーションを表示するMVPです。取り込んだデータはブラウザのIndexedDBへ保存し、外部送信は行いません。

## 実行手順

### 1. ローカルサーバーで開く（推奨）

```bash
cd mvp
npm install
npm run dev
```

ブラウザで表示されたURLにアクセスしてください。

> ※ `xlsx` ライブラリを同梱しているため、依存インストール後はCSV/XLSXともにオフラインで取り込み可能です。
> ※ 日本語CSVはShift_JISの可能性があるため、UTF-8で失敗した場合は自動的にShift_JISで再読込します。

## 取込仕様（明細）

- 対象フォーマット: MoneyForwardの明細CSV/XLSX（`マスタ` シート）
- 取込条件: `計算対象 = 1` の行のみ保存
- 取り込む主な列:
  - `日付`, `内容`, `金額(円)`, `保有金融機関`, `大項目`, `中項目`, `メモ`, `振替`, `ID`
- `メモ` は保存・表示されます
- `保有金融機関`, `大項目`, `中項目` は未知値でもそのまま保持します

## 将来シミュレーション（M1）

- 手入力できる項目:
  - 現在年齢、予測上限年齢、年間インフレ率
  - 毎月の収入/支出
  - 資産クラス別年率（現金/株式/投信）
  - 年金（開始年齢、終了年齢、月額）
  - ライフイベント（一時、期間）
- 表示:
  - 最終資産（名目/実質）
  - 資金ショート予測年月
  - 年次テーブル（名目資産/実質資産/年間収支）
- 入力内容はローカルストレージに保存され、再表示時に復元されます。

## 主要ファイルと役割

- `index.html` : 画面構成（データ取込/ダッシュボード/明細一覧/集計/将来シミュレーション）
- `src/main.js` : 画面イベント、取込処理、描画ロジック、将来シミュレーション計算
- `src/style.css` : 画面のスタイル
- `sample-data/*.csv` : サンプル入力データ

## サンプルデータ読み込み確認

1. `sample-data/transactions_sample.csv` を「家計簿（明細）」へ取込
2. `sample-data/assets_sample.csv` を「資産推移」へ取込
3. ダッシュボードに今月収支/主要カテゴリ/資産スナップショットが表示されることを確認
4. 「明細一覧」と「月次集計」が更新されることを確認
5. 「将来シミュレーション (M1)」で条件を入力し、「予測を再計算」で結果が更新されることを確認
